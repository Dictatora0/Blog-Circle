# Blog Circle è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ - å®Œæ•´å®ç°

## âœ… å·²å®Œæˆçš„å·¥ä½œ

### ğŸ”§ åç«¯æµ‹è¯•æ¡†æ¶

#### 1. ä¾èµ–é…ç½® (`backend/pom.xml`)
- âœ… JUnit 5 (Spring Boot Test è‡ªå¸¦)
- âœ… Mockito (Mockæ¡†æ¶)
- âœ… AssertJ (æµç•…æ–­è¨€)
- âœ… H2 Database (å†…å­˜æ•°æ®åº“)
- âœ… Testcontainers (é›†æˆæµ‹è¯•ï¼Œå¯é€‰)

#### 2. æµ‹è¯•é…ç½®æ–‡ä»¶ (`backend/src/test/resources/application-test.yml`)
- âœ… H2å†…å­˜æ•°æ®åº“é…ç½®
- âœ… æµ‹è¯•ä¸“ç”¨JWTå¯†é’¥
- âœ… æµ‹è¯•æ—¥å¿—çº§åˆ«

#### 3. æµ‹è¯•ç±»å®ç°

**Controlleræµ‹è¯•:**
- âœ… `AuthControllerTest.java` - è®¤è¯æ§åˆ¶å™¨æµ‹è¯•
  - ç”¨æˆ·æ³¨å†ŒæˆåŠŸ/å¤±è´¥
  - ç”¨æˆ·ç™»å½•æˆåŠŸ/å¤±è´¥
- âœ… `PostControllerTest.java` - æ–‡ç« æ§åˆ¶å™¨æµ‹è¯•
  - åˆ›å»º/æ›´æ–°/åˆ é™¤æ–‡ç« 
  - è·å–æ–‡ç« åˆ—è¡¨å’Œè¯¦æƒ…
  - è·å–æˆ‘çš„æ–‡ç« 

**Serviceæµ‹è¯•:**
- âœ… `UserServiceTest.java` - ç”¨æˆ·æœåŠ¡æµ‹è¯•
  - ç”¨æˆ·æ³¨å†Œ/ç™»å½•é€»è¾‘
  - å¯†ç åŠ å¯†éªŒè¯
  - ç”¨æˆ·CRUDæ“ä½œ

**Utilæµ‹è¯•:**
- âœ… `JwtUtilTest.java` - JWTå·¥å…·ç±»æµ‹è¯•
  - Tokenç”Ÿæˆå’Œè§£æ
  - Tokenæœ‰æ•ˆæ€§éªŒè¯
  - ç”¨æˆ·ä¿¡æ¯æå–

### ğŸ’» å‰ç«¯æµ‹è¯•æ¡†æ¶

#### 1. ä¾èµ–é…ç½® (`frontend/package.json`)
- âœ… Vitest (å•å…ƒæµ‹è¯•æ¡†æ¶)
- âœ… Vue Testing Library (ç»„ä»¶æµ‹è¯•)
- âœ… Playwright (E2Eæµ‹è¯•)
- âœ… è¦†ç›–ç‡å·¥å…· (@vitest/coverage-v8)

#### 2. æµ‹è¯•é…ç½®æ–‡ä»¶
- âœ… `vite.config.js` - Vitesté…ç½®
- âœ… `playwright.config.js` - Playwrighté…ç½®
- âœ… `tests/setup.js` - æµ‹è¯•ç¯å¢ƒè®¾ç½®

#### 3. æµ‹è¯•ç”¨ä¾‹å®ç°

**å•å…ƒæµ‹è¯•:**
- âœ… `TopNavbar.spec.js` - é¡¶éƒ¨å¯¼èˆªæ ç»„ä»¶æµ‹è¯•
  - ç™»å½•/æœªç™»å½•çŠ¶æ€æ˜¾ç¤º
  - å¯¼èˆªåŠŸèƒ½
  - Logoç‚¹å‡»
- âœ… `MomentItem.spec.js` - åŠ¨æ€å¡ç‰‡ç»„ä»¶æµ‹è¯•
  - å†…å®¹æ˜¾ç¤º
  - ç”¨æˆ·ä¿¡æ¯
  - ç»Ÿè®¡æ•°æ®
  - å›¾ç‰‡æ˜¾ç¤º

**E2Eæµ‹è¯•:**
- âœ… `blog-circle.spec.js` - ç«¯åˆ°ç«¯æµ‹è¯•
  - ç”¨æˆ·ç™»å½•æµç¨‹
  - å‘å¸ƒåŠ¨æ€ï¼ˆæ–‡å­—+å›¾ç‰‡ï¼‰
  - ç‚¹èµä¸è¯„è®ºäº¤äº’
  - æ»šåŠ¨åŠ è½½
  - å¯¼èˆªåŠŸèƒ½

### ğŸš€ CI/CDé…ç½®

- âœ… `.github/workflows/test.yml` - GitHub Actionsé…ç½®
  - åç«¯æµ‹è¯•è‡ªåŠ¨è¿è¡Œ
  - å‰ç«¯æµ‹è¯•è‡ªåŠ¨è¿è¡Œ
  - PostgreSQLæœåŠ¡å®¹å™¨
  - æµ‹è¯•ç»“æœä¸Šä¼ 

## ğŸ“ æ–‡ä»¶ç»“æ„

```
CloudCom/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ pom.xml                              # âœ… å·²æ›´æ–°æµ‹è¯•ä¾èµ–
â”‚   â””â”€â”€ src/test/
â”‚       â”œâ”€â”€ java/com/cloudcom/blog/
â”‚       â”‚   â”œâ”€â”€ controller/
â”‚       â”‚   â”‚   â”œâ”€â”€ AuthControllerTest.java  # âœ… è®¤è¯æµ‹è¯•
â”‚       â”‚   â”‚   â””â”€â”€ PostControllerTest.java   # âœ… æ–‡ç« æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ service/
â”‚       â”‚   â”‚   â””â”€â”€ UserServiceTest.java     # âœ… ç”¨æˆ·æœåŠ¡æµ‹è¯•
â”‚       â”‚   â””â”€â”€ util/
â”‚       â”‚       â””â”€â”€ JwtUtilTest.java         # âœ… JWTå·¥å…·æµ‹è¯•
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application-test.yml         # âœ… æµ‹è¯•é…ç½®
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ package.json                         # âœ… å·²æ›´æ–°æµ‹è¯•ä¾èµ–
â”‚   â”œâ”€â”€ vite.config.js                       # âœ… å·²æ·»åŠ Vitesté…ç½®
â”‚   â”œâ”€â”€ playwright.config.js                 # âœ… Playwrighté…ç½®
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ setup.js                         # âœ… æµ‹è¯•ç¯å¢ƒè®¾ç½®
â”‚       â”œâ”€â”€ unit/
â”‚       â”‚   â””â”€â”€ components/
â”‚       â”‚       â”œâ”€â”€ TopNavbar.spec.js        # âœ… å¯¼èˆªæ æµ‹è¯•
â”‚       â”‚       â””â”€â”€ MomentItem.spec.js        # âœ… åŠ¨æ€å¡ç‰‡æµ‹è¯•
â”‚       â””â”€â”€ e2e/
â”‚           â””â”€â”€ blog-circle.spec.js          # âœ… E2Eæµ‹è¯•
â”‚
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ test.yml                         # âœ… CI/CDé…ç½®
â”‚
â””â”€â”€ TESTING.md                               # âœ… æµ‹è¯•æ–‡æ¡£
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

### åç«¯æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
cd backend
mvn test

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
mvn test -Dtest=AuthControllerTest

# ç”Ÿæˆæµ‹è¯•æŠ¥å‘Š
mvn surefire-report:report
```

### å‰ç«¯æµ‹è¯•

```bash
# å®‰è£…ä¾èµ–
cd frontend
npm install

# è¿è¡Œå•å…ƒæµ‹è¯•
npm run test

# è¿è¡Œæµ‹è¯•UI
npm run test:ui

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# è¿è¡ŒE2Eæµ‹è¯•ï¼ˆéœ€è¦å…ˆå¯åŠ¨dev serverï¼‰
npm run dev  # ç»ˆç«¯1
npm run test:e2e  # ç»ˆç«¯2

# E2Eæµ‹è¯•UIæ¨¡å¼
npm run test:e2e:ui
```

### CI/CD

æäº¤ä»£ç åˆ°GitHubåï¼ŒGitHub Actionsä¼šè‡ªåŠ¨è¿è¡Œï¼š
1. åç«¯æµ‹è¯•ï¼ˆä½¿ç”¨PostgreSQLå®¹å™¨ï¼‰
2. å‰ç«¯å•å…ƒæµ‹è¯•
3. å‰ç«¯E2Eæµ‹è¯•
4. ä¸Šä¼ æµ‹è¯•ç»“æœå’Œè¦†ç›–ç‡æŠ¥å‘Š

## ğŸ“Š æµ‹è¯•è¦†ç›–èŒƒå›´

### åç«¯æµ‹è¯•è¦†ç›–
- âœ… Controllerå±‚ (AuthController, PostController)
- âœ… Serviceå±‚ (UserService)
- âœ… Utilå±‚ (JwtUtil)
- âœ… æ•°æ®åº“æ“ä½œ (H2å†…å­˜æ•°æ®åº“)
- âœ… JWT Tokenç”Ÿæˆå’ŒéªŒè¯

### å‰ç«¯æµ‹è¯•è¦†ç›–
- âœ… ç»„ä»¶æ¸²æŸ“ (TopNavbar, MomentItem)
- âœ… ç”¨æˆ·äº¤äº’ (ç™»å½•ã€å¯¼èˆªã€ç‚¹èµ)
- âœ… è·¯ç”±è·³è½¬
- âœ… çŠ¶æ€ç®¡ç† (Pinia)
- âœ… E2Eå®Œæ•´æµç¨‹

## ğŸ¨ æµ‹è¯•ç‰¹ç‚¹

1. **Given-When-Thené£æ ¼**: æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹éƒ½ä½¿ç”¨æ¸…æ™°çš„åœºæ™¯æè¿°
2. **Mockæ•°æ®**: ä½¿ç”¨æœ‰æ„ä¹‰çš„æµ‹è¯•æ•°æ®
3. **ç‹¬ç«‹æµ‹è¯•**: æ¯ä¸ªæµ‹è¯•ç”¨ä¾‹ç‹¬ç«‹è¿è¡Œï¼Œäº’ä¸å½±å“
4. **å®Œæ•´è¦†ç›–**: æ¶µç›–æˆåŠŸå’Œå¤±è´¥åœºæ™¯
5. **è‡ªåŠ¨åŒ–**: CI/CDè‡ªåŠ¨è¿è¡Œæ‰€æœ‰æµ‹è¯•

## ğŸ“ æµ‹è¯•ç¤ºä¾‹

### åç«¯æµ‹è¯•ç¤ºä¾‹ (AuthControllerTest)
```java
@Test
@DisplayName("åœºæ™¯1: ç”¨æˆ·æ³¨å†ŒæˆåŠŸ")
void testRegisterSuccess() throws Exception {
    // Given: æ¨¡æ‹Ÿç”¨æˆ·æœåŠ¡è¿”å›æ–°åˆ›å»ºçš„ç”¨æˆ·
    // When: å‘é€æ³¨å†Œè¯·æ±‚
    // Then: éªŒè¯å“åº”
}
```

### å‰ç«¯æµ‹è¯•ç¤ºä¾‹ (TopNavbar.spec.js)
```javascript
it('åœºæ™¯1: æœªç™»å½•çŠ¶æ€æ˜¾ç¤ºç™»å½•æŒ‰é’®', () => {
    // Given: ç”¨æˆ·æœªç™»å½•
    // When: æ¸²æŸ“ç»„ä»¶
    // Then: åº”è¯¥æ˜¾ç¤ºç™»å½•æŒ‰é’®
})
```

### E2Eæµ‹è¯•ç¤ºä¾‹ (blog-circle.spec.js)
```javascript
test('åœºæ™¯1: ç”¨æˆ·ç™»å½•æµç¨‹', async ({ page }) => {
    // Given: ç”¨æˆ·åœ¨é¦–é¡µ
    // When: ç‚¹å‡»ç™»å½•å¹¶è¾“å…¥å‡­è¯
    // Then: åº”è¯¥ç™»å½•æˆåŠŸ
})
```

## ğŸ” éªŒè¯æµ‹è¯•æ¡†æ¶

è¿è¡Œä»¥ä¸‹å‘½ä»¤éªŒè¯æµ‹è¯•æ¡†æ¶æ˜¯å¦æ­£å¸¸å·¥ä½œï¼š

```bash
# åç«¯æµ‹è¯•
cd backend && mvn test

# å‰ç«¯å•å…ƒæµ‹è¯•
cd frontend && npm install && npm run test

# å‰ç«¯E2Eæµ‹è¯•ï¼ˆéœ€è¦å…ˆå¯åŠ¨dev serverï¼‰
cd frontend && npm run dev &
npm run test:e2e
```

## ğŸ“š ç›¸å…³æ–‡æ¡£

- è¯¦ç»†ä½¿ç”¨è¯´æ˜: `TESTING.md`
- åç«¯APIæ–‡æ¡£: `backend/README.md`
- å‰ç«¯æ–‡æ¡£: `frontend/README.md`

## ğŸ‰ æ€»ç»“

âœ… å®Œæ•´çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶å·²æ­å»ºå®Œæˆ
âœ… åç«¯æµ‹è¯•è¦†ç›–Controllerã€Serviceã€Utilå±‚
âœ… å‰ç«¯æµ‹è¯•è¦†ç›–ç»„ä»¶å’ŒE2Eåœºæ™¯
âœ… CI/CDè‡ªåŠ¨è¿è¡Œæµ‹è¯•
âœ… æ‰€æœ‰æµ‹è¯•ç”¨ä¾‹ä½¿ç”¨Given-When-Thené£æ ¼
âœ… æä¾›æ¸…æ™°çš„æµ‹è¯•æ–‡æ¡£å’Œä½¿ç”¨æŒ‡å—

ç°åœ¨å¯ä»¥è¿è¡Œ `mvn test` å’Œ `npm run test` æ¥éªŒè¯æ‰€æœ‰åŠŸèƒ½ï¼

