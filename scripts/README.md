# éƒ¨ç½²ä¸æµ‹è¯•è„šæœ¬è¯´æ˜

æœ¬ç›®å½•åŒ…å«é¡¹ç›®çš„æ‰€æœ‰éƒ¨ç½²ã€éªŒè¯å’Œæµ‹è¯•è„šæœ¬ã€‚

## é‡è¦ï¼šç«¯å£é…ç½®

**å½“å‰ GaussDB é›†ç¾¤ç«¯å£é…ç½®ï¼š**

- **ä¸»åº“**: 5432 (HA ç«¯å£: 5433)
- **å¤‡åº“ 1**: 5434 (HA ç«¯å£: 5435)
- **å¤‡åº“ 2**: 5436 (HA ç«¯å£: 5437)

> æ³¨æ„ï¼šGaussDB æ¯ä¸ªå®ä¾‹éœ€è¦ 2 ä¸ªè¿ç»­ç«¯å£ï¼ˆä¸»ç«¯å£+HA ç«¯å£ï¼‰ï¼Œå› æ­¤ä½¿ç”¨é—´éš”ç«¯å£é¿å…å†²çªã€‚

---

## è„šæœ¬åˆ†ç±»

### ğŸ”§ GaussDB é›†ç¾¤ç®¡ç†

#### `refactor-ports.sh` â­ æ¨èé¦–å…ˆè¿è¡Œ

é‡æ„ GaussDB é›†ç¾¤ç«¯å£é…ç½®

**åŠŸèƒ½**ï¼š

- åœæ­¢æ‰€æœ‰å®ä¾‹
- ä¿®æ”¹ç«¯å£é…ç½®ï¼ˆ5432, 5434, 5436ï¼‰
- é‡æ–°å¯åŠ¨æ‰€æœ‰å®ä¾‹
- éªŒè¯ç«¯å£ç›‘å¬

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/refactor-ports.sh
```

**ä½•æ—¶ä½¿ç”¨**ï¼š

- é¦–æ¬¡éƒ¨ç½²å
- ç«¯å£å†²çªæ—¶
- é›†ç¾¤é‡ç½®æ—¶

---

#### `verify-gaussdb-cluster.sh`

éªŒè¯ GaussDB ä¸€ä¸»äºŒå¤‡é›†ç¾¤çŠ¶æ€

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥ä¸»åº“ã€å¤‡åº“ 1ã€å¤‡åº“ 2 è¿è¡ŒçŠ¶æ€
- éªŒè¯ä¸»å¤‡å¤åˆ¶è¿æ¥
- æµ‹è¯•ä¸»åº“å†™å…¥åŠŸèƒ½
- æµ‹è¯•å¤‡åº“è¯»å–åŠŸèƒ½
- éªŒè¯æ•°æ®åŒæ­¥
- æ˜¾ç¤ºå¤åˆ¶å»¶è¿Ÿç»Ÿè®¡

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/verify-gaussdb-cluster.sh
```

**å‰ç½®æ¡ä»¶**ï¼š

- GaussDB é›†ç¾¤å·²éƒ¨ç½²
- ä¸‰ä¸ªå®ä¾‹æ­£åœ¨è¿è¡Œï¼ˆç«¯å£ 5432, 5434, 5436ï¼‰

---

#### `test-gaussdb-readwrite.sh`

æµ‹è¯• GaussDB è¯»å†™åŠŸèƒ½

**åŠŸèƒ½**ï¼š

- æµ‹è¯•ä¸»åº“å’Œå¤‡åº“è¿æ¥
- æµ‹è¯•ä¸»åº“å†™å…¥
- æµ‹è¯•å¤‡åº“è¯»å–
- éªŒè¯ä¸»å¤‡æ•°æ®ä¸€è‡´æ€§
- æµ‹è¯•ä¸šåŠ¡è¡¨è¯»å†™

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# é»˜è®¤é…ç½®ï¼ˆç«¯å£ 5432, 5434ï¼‰
./scripts/test-gaussdb-readwrite.sh

# è‡ªå®šä¹‰é…ç½®
./scripts/test-gaussdb-readwrite.sh <ä¸»åº“IP> <ä¸»åº“ç«¯å£> <å¤‡åº“ç«¯å£>
```

**ç¤ºä¾‹**ï¼š

```bash
./scripts/test-gaussdb-readwrite.sh 127.0.0.1 5432 5434
```

---

### ğŸ› ï¸ æ•…éšœæ’æŸ¥ä¸ä¿®å¤

#### `diagnose-gaussdb-ports.sh`

è¯Šæ–­ GaussDB ç«¯å£é…ç½®é—®é¢˜

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥å½“å‰è¿è¡Œçš„è¿›ç¨‹å’Œç«¯å£
- æ£€æŸ¥é…ç½®æ–‡ä»¶ä¸­çš„ç«¯å£è®¾ç½®
- åˆ†æç«¯å£å†²çªé—®é¢˜
- æä¾›ä¿®å¤å»ºè®®

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/diagnose-gaussdb-ports.sh
```

---

#### `fix-primary-replication.sh`

ä¿®å¤ä¸»åº“å¤åˆ¶é…ç½®

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥å¹¶åˆ›å»º replicator ç”¨æˆ·
- é…ç½® pg_hba.conf å¤åˆ¶è§„åˆ™
- é‡ç½® replicator å¯†ç 
- æ£€æŸ¥å¤åˆ¶å‚æ•°ï¼ˆwal_level, max_wal_sendersï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/fix-primary-replication.sh
```

---

#### `rebuild-standby2.sh`

é‡å»ºå¤‡åº“ 2

**åŠŸèƒ½**ï¼š

- åœæ­¢å¹¶å¤‡ä»½æ—§çš„å¤‡åº“ 2 æ•°æ®
- ä½¿ç”¨ gs_basebackup ä»ä¸»åº“é‡æ–°åŒæ­¥
- é…ç½®å¤åˆ¶è¿æ¥å’Œç«¯å£
- å¯åŠ¨å¹¶éªŒè¯å¤‡åº“ 2

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/rebuild-standby2.sh
```

**æ³¨æ„**ï¼šä¼šåˆ é™¤å¤‡åº“ 2 çš„æ‰€æœ‰æ•°æ®ï¼

---

#### `check-standby2-logs.sh`

æ£€æŸ¥å¤‡åº“ 2 æ—¥å¿—å’Œé…ç½®

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥æ•°æ®ç›®å½•çŠ¶æ€
- æŸ¥çœ‹æœ€æ–°é”™è¯¯æ—¥å¿—
- æ£€æŸ¥å…³é”®é…ç½®æ–‡ä»¶
- éªŒè¯æ–‡ä»¶æƒé™

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/check-standby2-logs.sh
```

---

####`fix-backup-permissions.sh`

ä¿®å¤å¤‡ä»½æ–‡ä»¶æƒé™

**åŠŸèƒ½**ï¼š

- æŸ¥æ‰¾æ‰€æœ‰ .bak å¤‡ä»½æ–‡ä»¶
- ä¿®å¤æ–‡ä»¶æƒé™ä¸º omm:omm
- å¯é€‰åˆ é™¤å¤‡ä»½æ–‡ä»¶

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/fix-backup-permissions.sh
```

---

#### `full-reset-cluster.sh`

å®Œå…¨é‡ç½®é›†ç¾¤ï¼ˆæ—§ç‰ˆï¼Œå·²è¢« refactor-ports.sh æ›¿ä»£ï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/full-reset-cluster.sh
```

---

### ğŸš€ Spark é›†æˆç›¸å…³

#### `test-spark-gaussdb.sh`

æµ‹è¯• Spark è®¿é—® GaussDB é›†ç¾¤

**åŠŸèƒ½**ï¼š

- ç¼–è¯‘ Spark é¡¹ç›®
- è¿è¡Œ Spark ä»»åŠ¡
- æµ‹è¯• Spark è¯»å†™ GaussDB
- éªŒè¯ä¸»å¤‡åº“è®¿é—®

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# é»˜è®¤é…ç½®
./scripts/test-spark-gaussdb.sh

# è‡ªå®šä¹‰ GaussDB åœ°å€
./scripts/test-spark-gaussdb.sh 10.211.55.11 5432
```

**å‰ç½®æ¡ä»¶**ï¼š

- å·²å®‰è£… Spark
- GaussDB é›†ç¾¤æ­£åœ¨è¿è¡Œ
- analytics æ¨¡å—å·²ç¼–è¯‘

---

### API éªŒè¯ç›¸å…³

#### `verify-api-mapping.sh`

éªŒè¯å‰åç«¯ API æ˜ å°„å…³ç³»

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥å‰ç«¯ API å®šä¹‰
- éªŒè¯åç«¯ Controller æ¥å£
- è‡ªåŠ¨åŒ¹é…å‰åç«¯ API
- ç”ŸæˆéªŒè¯æŠ¥å‘Š

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/verify-api-mapping.sh
```

**éªŒè¯çš„ API**ï¼š

- è®¤è¯ APIï¼ˆç™»å½•ã€æ³¨å†Œï¼‰
- ç”¨æˆ· APIï¼ˆè·å–ä¿¡æ¯ã€æ›´æ–°ï¼‰
- å¸–å­ APIï¼ˆCRUDã€åˆ—è¡¨ã€æ—¶é—´çº¿ï¼‰
- è¯„è®º APIï¼ˆCRUDã€æŸ¥è¯¢ï¼‰
- å¥½å‹ APIï¼ˆè¯·æ±‚ã€æ¥å—ã€æ‹’ç»ã€åˆ—è¡¨ã€æœç´¢ï¼‰
- ç‚¹èµ APIï¼ˆç‚¹èµã€å–æ¶ˆã€æ£€æŸ¥ã€è®¡æ•°ï¼‰
- ä¸Šä¼  APIï¼ˆå›¾ç‰‡ä¸Šä¼ ï¼‰
- ç»Ÿè®¡ APIï¼ˆSpark åˆ†æã€æ•°æ®æŸ¥è¯¢ï¼‰

---

### è™šæ‹ŸæœºæœåŠ¡ç®¡ç†

#### `start-vm-services.sh`

å¯åŠ¨è™šæ‹Ÿæœºä¸Šçš„æ‰€æœ‰æœåŠ¡

**åŠŸèƒ½**ï¼š

- å¯åŠ¨ GaussDB ä¸»åº“å’Œå¤‡åº“ï¼ˆå¦‚æœé…ç½®äº†é›†ç¾¤ï¼‰
- å¯åŠ¨ Docker Compose æœåŠ¡ï¼ˆåç«¯ã€å‰ç«¯ï¼‰
- æ‰§è¡Œå¥åº·æ£€æŸ¥
- æ˜¾ç¤ºæœåŠ¡è®¿é—®åœ°å€

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/start-vm-services.sh
```

**è‡ªåŠ¨æ£€æµ‹**ï¼š

- è‡ªåŠ¨æ£€æµ‹æ˜¯å¦ä¸ºé›†ç¾¤æ¨¡å¼
- è‡ªåŠ¨è·³è¿‡å·²è¿è¡Œçš„æœåŠ¡
- è‡ªåŠ¨ç­‰å¾…æœåŠ¡å°±ç»ª

---

#### `stop-vm-services.sh`

åœæ­¢è™šæ‹Ÿæœºä¸Šçš„æ‰€æœ‰æœåŠ¡

**åŠŸèƒ½**ï¼š

- åœæ­¢ Docker Compose æœåŠ¡
- åœæ­¢ GaussDB é›†ç¾¤ï¼ˆä¸»åº“å’Œå¤‡åº“ï¼‰
- éªŒè¯æœåŠ¡å·²å®Œå…¨åœæ­¢

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/stop-vm-services.sh
```

---

#### `restart-vm-services.sh`

é‡å¯è™šæ‹Ÿæœºä¸Šçš„æ‰€æœ‰æœåŠ¡

**åŠŸèƒ½**ï¼š

- ä¾æ¬¡è°ƒç”¨åœæ­¢å’Œå¯åŠ¨è„šæœ¬
- ç¡®ä¿å®Œå…¨æ¸…ç†åå†å¯åŠ¨

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/restart-vm-services.sh
```

---

#### `check-vm-status.sh`

æ£€æŸ¥è™šæ‹ŸæœºæœåŠ¡çŠ¶æ€

**åŠŸèƒ½**ï¼š

- æ£€æŸ¥è™šæ‹Ÿæœºè¿æ¥
- æ£€æŸ¥ GaussDB ä¸»åº“å’Œå¤‡åº“çŠ¶æ€
- æ£€æŸ¥å¤åˆ¶çŠ¶æ€
- æ£€æŸ¥ Docker å®¹å™¨çŠ¶æ€
- æ£€æŸ¥æœåŠ¡ç«¯å£ç›‘å¬
- åº”ç”¨å¥åº·æ£€æŸ¥
- ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
./scripts/check-vm-status.sh
```

**è¾“å‡ºä¿¡æ¯**ï¼š

- GaussDB ç‰ˆæœ¬å’Œè¿æ¥æ•°
- å¤åˆ¶å»¶è¿Ÿå’ŒçŠ¶æ€
- Docker å®¹å™¨è¿è¡ŒçŠ¶æ€
- æœåŠ¡ç«¯å£ç›‘å¬æƒ…å†µ
- CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡

---

### æœåŠ¡å¯åŠ¨ç›¸å…³

#### `start-backend.sh`

å¯åŠ¨åç«¯æœåŠ¡ï¼ˆæœ¬åœ°ï¼‰

**åŠŸèƒ½**ï¼š

- ç¼–è¯‘åç«¯é¡¹ç›®
- å¯åŠ¨ Spring Boot åº”ç”¨
- æ”¯æŒå¼€å‘å’Œç”Ÿäº§æ¨¡å¼

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# å¼€å‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
./scripts/start-backend.sh

# ç”Ÿäº§æ¨¡å¼ï¼ˆä½¿ç”¨ GaussDB é›†ç¾¤é…ç½®ï¼‰
./scripts/start-backend.sh prod

# è‡ªå®šä¹‰ç«¯å£
./scripts/start-backend.sh dev 8081
```

**é…ç½®è¯´æ˜**ï¼š

- `dev` æ¨¡å¼ï¼šä½¿ç”¨ `application.yml`
- `prod` æˆ– `gaussdb-cluster` æ¨¡å¼ï¼šä½¿ç”¨ `application-gaussdb-cluster.yml`

---

#### `start-frontend.sh`

å¯åŠ¨å‰ç«¯æœåŠ¡

**åŠŸèƒ½**ï¼š

- å®‰è£…å‰ç«¯ä¾èµ–
- å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- æ„å»ºç”Ÿäº§ç‰ˆæœ¬

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# å¼€å‘æ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
./scripts/start-frontend.sh

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
./scripts/start-frontend.sh build

# è‡ªå®šä¹‰ç«¯å£
./scripts/start-frontend.sh dev 3000
```

---

### ç«¯åˆ°ç«¯æµ‹è¯•

#### `test-e2e.sh`

å®Œæ•´çš„ç«¯åˆ°ç«¯åŠŸèƒ½æµ‹è¯•

**åŠŸèƒ½**ï¼š

- å¥åº·æ£€æŸ¥
- ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- è·å–ç”¨æˆ·ä¿¡æ¯
- åˆ›å»ºå’ŒæŸ¥è¯¢å¸–å­
- ç‚¹èµåŠŸèƒ½
- è¯„è®ºåŠŸèƒ½
- ç»Ÿè®¡æ•°æ®æŸ¥è¯¢

**ä½¿ç”¨æ–¹æ³•**ï¼š

```bash
# æµ‹è¯•æœ¬åœ°æœåŠ¡
./scripts/test-e2e.sh

# æµ‹è¯•è¿œç¨‹æœåŠ¡
./scripts/test-e2e.sh http://10.211.55.11:8080
```

**æµ‹è¯•æµç¨‹**ï¼š

1. å¥åº·æ£€æŸ¥
2. æ³¨å†Œæ–°ç”¨æˆ·
3. ç”¨æˆ·ç™»å½•è·å– Token
4. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
5. åˆ›å»ºæµ‹è¯•å¸–å­
6. è·å–å¸–å­åˆ—è¡¨å’Œè¯¦æƒ…
7. ç‚¹èµå¸–å­
8. åˆ›å»ºè¯„è®º
9. è·å–è¯„è®ºåˆ—è¡¨
10. æŸ¥è¯¢ç»Ÿè®¡æ•°æ®

---

## ğŸ“‹ å®Œæ•´éƒ¨ç½²æµç¨‹

### æ–¹æ¡ˆ Aï¼šå¿«é€Ÿéƒ¨ç½²ï¼ˆæ¨èï¼‰

#### æ­¥éª¤ 1ï¼šåŒæ­¥è„šæœ¬åˆ°è™šæ‹Ÿæœºï¼ˆåœ¨æœ¬åœ° Mac ä¸Šï¼‰

```bash
cd /Users/lifulin/Desktop/CloudCom
./sync-scripts-to-vm.sh
```

#### æ­¥éª¤ 2ï¼šé‡æ„ç«¯å£é…ç½®ï¼ˆåœ¨è™šæ‹Ÿæœºä¸Šï¼‰

```bash
ssh root@10.211.55.11
cd CloudCom
./scripts/refactor-ports.sh
```

#### æ­¥éª¤ 3ï¼šéªŒè¯é›†ç¾¤ï¼ˆåœ¨è™šæ‹Ÿæœºä¸Šï¼‰

```bash
./scripts/verify-gaussdb-cluster.sh
```

#### æ­¥éª¤ 4ï¼šæµ‹è¯•è¯»å†™åŠŸèƒ½ï¼ˆåœ¨è™šæ‹Ÿæœºä¸Šï¼‰

```bash
./scripts/test-gaussdb-readwrite.sh
```

---

### æ–¹æ¡ˆ Bï¼šä»å¤´éƒ¨ç½²

#### æ­¥éª¤ 1ï¼šåˆå§‹åŒ– GaussDB é›†ç¾¤ï¼ˆåœ¨è™šæ‹Ÿæœºä¸Šï¼‰

```bash
cd /Users/lifulin/Desktop/CloudCom  # æˆ– ~/CloudCom
./setup-gaussdb-single-vm-cluster.sh
```

#### æ­¥éª¤ 2ï¼šé‡æ„ç«¯å£é…ç½®

```bash
./scripts/refactor-ports.sh
```

#### æ­¥éª¤ 3ï¼šä¿®å¤ä¸»åº“å¤åˆ¶é…ç½®

```bash
./scripts/fix-primary-replication.sh
```

#### æ­¥éª¤ 4ï¼šé‡å»ºå¤‡åº“ 2ï¼ˆå¦‚æœéœ€è¦ï¼‰

```bash
./scripts/rebuild-standby2.sh
```

#### æ­¥éª¤ 5ï¼šéªŒè¯é›†ç¾¤

```bash
./scripts/verify-gaussdb-cluster.sh
```

---

### åº”ç”¨éƒ¨ç½²

#### 1. å¯åŠ¨åç«¯æœåŠ¡ï¼ˆæœ¬åœ°æˆ–è™šæ‹Ÿæœºï¼‰

```bash
# æœ¬åœ°å¼€å‘æ¨¡å¼
./scripts/start-backend.sh dev

# ä½¿ç”¨ GaussDB é›†ç¾¤é…ç½®
./scripts/start-backend.sh gaussdb-cluster
```

#### 2. å¯åŠ¨å‰ç«¯æœåŠ¡

```bash
./scripts/start-frontend.sh dev
```

#### 3. è¿è¡Œæµ‹è¯•

```bash
# API æ˜ å°„éªŒè¯
./scripts/verify-api-mapping.sh

# ç«¯åˆ°ç«¯æµ‹è¯•
./scripts/test-e2e.sh

# Spark æµ‹è¯•ï¼ˆå¯é€‰ï¼‰
./scripts/test-spark-gaussdb.sh
```

---

## Docker éƒ¨ç½²

ä½¿ç”¨é¡¹ç›®æ ¹ç›®å½•çš„éƒ¨ç½²è„šæœ¬ï¼š

```bash
# æœ¬åœ° Docker Compose éƒ¨ç½²
./deploy.sh local

# è™šæ‹Ÿæœºéƒ¨ç½²
./deploy.sh vm

# GaussDB é›†ç¾¤éƒ¨ç½²
./deploy.sh cluster
```

---

## ğŸ” å¸¸è§é—®é¢˜ä¸æ•…éšœæ’æŸ¥

### ç«¯å£å†²çªé—®é¢˜

**ç—‡çŠ¶**ï¼š

- å¤‡åº“å¯åŠ¨å¤±è´¥ï¼Œæç¤º "port already in use"
- ä¸€ä¸ªè¿›ç¨‹ç›‘å¬å¤šä¸ªç«¯å£

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. è¯Šæ–­é—®é¢˜
./scripts/diagnose-gaussdb-ports.sh

# 2. é‡æ„ç«¯å£é…ç½®
./scripts/refactor-ports.sh

# 3. éªŒè¯ç»“æœ
./scripts/verify-gaussdb-cluster.sh
```

---

### ä¸»å¤‡å¤åˆ¶é—®é¢˜

**ç—‡çŠ¶**ï¼š

- å¤‡åº“æ— æ³•è¿æ¥åˆ°ä¸»åº“
- å¤åˆ¶çŠ¶æ€æ˜¾ç¤ºä¸ºç©º

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. ä¿®å¤ä¸»åº“å¤åˆ¶é…ç½®
./scripts/fix-primary-replication.sh

# 2. é‡å»ºå¤‡åº“ï¼ˆå¦‚æœå¿…è¦ï¼‰
./scripts/rebuild-standby2.sh

# 3. éªŒè¯å¤åˆ¶çŠ¶æ€
su - omm -c "gsql -d postgres -p 5432 -c 'SELECT * FROM pg_stat_replication;'"
```

---

### å¤‡åº“å¯åŠ¨å¤±è´¥

**ç—‡çŠ¶**ï¼š

- å¤‡åº“ 2 ä¸€ç›´å¯åŠ¨å¤±è´¥
- æ—¥å¿—æ˜¾ç¤º "could not connect to server"

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. æ£€æŸ¥æ—¥å¿—
./scripts/check-standby2-logs.sh

# 2. æ£€æŸ¥ä¸»åº“é…ç½®
./scripts/fix-primary-replication.sh

# 3. é‡å»ºå¤‡åº“2
./scripts/rebuild-standby2.sh
```

---

### æ–‡ä»¶æƒé™é—®é¢˜

**ç—‡çŠ¶**ï¼š

- gs_basebackup å¤±è´¥ï¼š"Permission denied"
- æ— æ³•è¯»å– .bak æ–‡ä»¶

**è§£å†³æ–¹æ³•**ï¼š

```bash
./scripts/fix-backup-permissions.sh
```

é€‰æ‹© `y` åˆ é™¤å¤‡ä»½æ–‡ä»¶

---

### API æµ‹è¯•å¤±è´¥

**é—®é¢˜**ï¼šæ— æ³•è·å– Token

**è§£å†³æ–¹æ³•**ï¼š

1. ç¡®ä¿åç«¯æœåŠ¡æ­£åœ¨è¿è¡Œ
2. æ£€æŸ¥æ•°æ®åº“è¿æ¥
3. éªŒè¯ç”¨æˆ·æ˜¯å¦å­˜åœ¨

**é—®é¢˜**ï¼šAPI è¿”å› 500 é”™è¯¯

**è§£å†³æ–¹æ³•**ï¼š

1. æŸ¥çœ‹åç«¯æ—¥å¿—
2. æ£€æŸ¥æ•°æ®åº“è¡¨ç»“æ„
3. éªŒè¯ SQL è¯­æ³•å…¼å®¹æ€§

---

## ğŸ’» ç¯å¢ƒè¦æ±‚

### GaussDB é›†ç¾¤

- **ç‰ˆæœ¬**: openGauss 5.0.0 æˆ– 9.2.4
- **ç”¨æˆ·**: omm
- **ç«¯å£**:
  - ä¸»åº“: 5432 (HA: 5433)
  - å¤‡åº“ 1: 5434 (HA: 5435)
  - å¤‡åº“ 2: 5436 (HA: 5437)
- **æ•°æ®åº“**: blog_db
- **ç”¨æˆ·**: bloguser / 747599qw@

### åç«¯

- JDK 17
- Maven 3.8+
- Spring Boot 3.1.5

### å‰ç«¯

- Node.js 18+
- npm æˆ– yarn
- Vite

### Sparkï¼ˆå¯é€‰ï¼‰

- Apache Spark 3.5.0
- Scala 2.12

### è™šæ‹Ÿæœº

- IP: 10.211.55.11
- ç”¨æˆ·: root / 747599qw@
- ç³»ç»Ÿ: openEuler 22.03
- SSH: éœ€è¦ sshpass

---

## ç›¸å…³æ–‡æ¡£

- [é¡¹ç›® README](../README.md)
- [å®éªŒæŠ¥å‘Š](../å®éªŒæŠ¥å‘Š.md)
- [éƒ¨ç½²æŒ‡å—](../DEPLOYMENT_GUIDE.md)
